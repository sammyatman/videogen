<!--
  GenAI Media Showdown – Images + Videos (reference centred)
  =========================================================
  Drop this file at the root of a GitHub repository (e.g. main branch)
  and enable GitHub Pages → Deploy from branch.
  Put your media under an assets/ folder (or anywhere you like) and
  fill in the examples array below with your own prompts, model names
  and file paths ( .jpg / .png / .mp4 / .webm …).
  One self-contained file – no build step required.
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VideoGen Models @ SPC VideoAI</title>

<!-- ----------- STYLES ----------- -->
<style>
:root{
  --bg:#0f0f0f;--bg-light:#1a1a1a;--fg:#fff;--fg-muted:#a0a0a0;
  --surface:#262626;--surface-hover:#333;--border:#404040;
  --accent:#3b82f6;--accent-hover:#2563eb;--success:#10b981;
  --warning:#f59e0b;--shadow:rgba(0,0,0,.3);
  --gradient:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  font-family:'Inter',-apple-system,BlinkMacSystemFont,system-ui,sans-serif
}
*,*::before,*::after{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0;background:var(--bg);color:var(--fg);line-height:1.6}

header{
  background:var(--surface);backdrop-filter:blur(10px);position:sticky;top:0;
  z-index:100;border-bottom:1px solid var(--border);padding:1rem 2rem;
  box-shadow:0 2px 20px var(--shadow)
}
.header-content{max-width:1400px;margin:0 auto}
header h1{
  margin:0 0 1rem;font-size:2rem;font-weight:700;
  background:var(--gradient);-webkit-background-clip:text;
  -webkit-text-fill-color:transparent;background-clip:text
}

.search-container{margin-bottom:1rem;position:relative}
#searchInput{
  width:100%;max-width:400px;padding:.75rem 1rem .75rem 2.5rem;
  background:var(--bg-light);border:1px solid var(--border);border-radius:12px;
  color:var(--fg);font-size:.9rem;transition:.2s
}
#searchInput:focus{outline:none;border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(59,130,246,.1)}
.search-icon{position:absolute;left:.75rem;top:50%;
  transform:translateY(-50%);color:var(--fg-muted);pointer-events:none}

nav{display:flex;flex-wrap:wrap;gap:.5rem;max-height:200px;overflow-y:auto}
nav a{
  padding:.5rem 1rem;background:var(--bg-light);
  border:1px solid var(--border);border-radius:8px;text-decoration:none;
  color:var(--fg);font-size:.85rem;white-space:nowrap;transition:.2s;
  position:relative;overflow:hidden
}
nav a:hover{background:var(--surface-hover);border-color:var(--accent);
  transform:translateY(-1px)}
nav a.hidden{display:none}

main{max-width:1400px;margin:0 auto;padding:2rem}

.stats{display:flex;gap:2rem;margin-bottom:2rem;flex-wrap:wrap}
.stat{
  background:var(--surface);border:1px solid var(--border);
  border-radius:12px;padding:1rem;text-align:center;min-width:120px
}
.stat-number{font-size:1.5rem;font-weight:700;color:var(--accent)}
.stat-label{font-size:.8rem;color:var(--fg-muted);text-transform:uppercase}

/* ───────── Model score chart ───────── */
.chart-wrapper{margin-bottom:2rem}
#scoreCategorySelect{
  background:var(--bg-light);color:var(--fg);border:1px solid var(--border);
  border-radius:8px;padding:.4rem .6rem;font-size:.85rem;margin-bottom:.75rem;
}
.chart-container{position:relative;width:100%;max-width:100%;}

section{margin-bottom:4rem;opacity:0;transform:translateY(20px);
         animation:fadeInUp .6s ease forwards}
@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}
section.hidden{display:none}

h2{margin:0 0 1.5rem;font-size:1.5rem;font-weight:600;
    scroll-margin-top:8rem;color:var(--fg);position:relative;padding-bottom:.5rem}
h2::after{
  content:'';position:absolute;bottom:0;left:0;width:60px;height:2px;
  background:var(--gradient);border-radius:1px
}

/* grid with reference first & centred */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:1.5rem
}
figure.reference{
  grid-column:1 / -1;          /* span the whole row */
  justify-self:center;         /* centre horizontally */
  max-width:380px;             /* optional: limit width */
}

figure{
  margin:0;background:var(--surface);border:1px solid var(--border);
  border-radius:16px;overflow:hidden;box-shadow:0 4px 20px var(--shadow);
  display:flex;flex-direction:column;transition:.3s;cursor:pointer;position:relative
}
figure:hover{transform:translateY(-4px);box-shadow:0 8px 40px var(--shadow);
             border-color:var(--accent)}

.image-container{position:relative;aspect-ratio:1;overflow:hidden;
                 background:var(--bg-light)}

figure img,figure video{
  display:block;width:100%;height:100%;object-fit:cover;transition:.3s
}
figure:hover img,figure:hover video{transform:scale(1.05)}

.loading-placeholder{
  display:flex;align-items:center;justify-content:center;height:100%;
  color:var(--fg-muted);font-size:.9rem
}
.loading-spinner{
  width:24px;height:24px;border:2px solid var(--border);
  border-top:2px solid var(--accent);border-radius:50%;
  animation:spin 1s linear infinite;margin-right:.5rem}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
.error-placeholder{
  background:rgba(239,68,68,.1);color:#ef4444;
  border:1px solid rgba(239,68,68,.2)
}

figcaption{
  padding:1rem;font-size:.9rem;font-weight:600;text-align:center;
  border-top:1px solid var(--border);background:var(--surface)
}

/* ───────── Modal ───────── */
.modal{
  display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;
  background:rgba(0,0,0,.9);backdrop-filter:blur(10px)
}
.modal.active{display:flex;align-items:center;justify-content:center;
              animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal-content{max-width:90vw;max-height:90vh;position:relative;
               animation:scaleIn .3s ease}
@keyframes scaleIn{from{transform:scale(.8)}to{transform:scale(1)}}
.modal img,.modal video{max-width:100%;max-height:100%;object-fit:contain;
                        border-radius:12px}
.modal video{background:#000}
.modal-caption{
  position:absolute;bottom:-3rem;left:50%;transform:translateX(-50%);
  background:var(--surface);color:var(--fg);padding:.5rem 1rem;border-radius:8px;
  font-size:.9rem;white-space:nowrap
}
.close{
  position:absolute;top:-3rem;right:0;color:var(--fg);font-size:2rem;
  font-weight:bold;cursor:pointer;width:2.5rem;height:2.5rem;
  display:flex;align-items:center;justify-content:center;
  background:var(--surface);border-radius:50%;transition:.2s}
.close:hover{background:var(--surface-hover);transform:scale(1.1)}

.no-results{text-align:center;color:var(--fg-muted);font-size:1.1rem;
            margin:4rem 0;display:none}.no-results.visible{display:block}

@media(max-width:768px){
  header{padding:1rem}
  header h1{font-size:1.5rem}
  main{padding:1rem}
  .grid{grid-template-columns:1fr;gap:1rem}
  .stats{justify-content:center}
  nav{max-height:150px}
}
@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:0.01ms!important;
   animation-iteration-count:1!important;transition-duration:0.01ms!important}
  html{scroll-behavior:auto}
}
nav a:focus,figure:focus,#searchInput:focus{
  outline:2px solid var(--accent);outline-offset:2px}
</style>
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header>
  <div class="header-content">
    <h1>VideoGen Models @ SPC VideoAI</h1>

    <div class="search-container">
      <div class="search-icon">🔍</div>
      <input id="searchInput" type="text" placeholder="Search prompts…" aria-label="Search prompts"/>
    </div>

    <nav id="nav" role="navigation" aria-label="Prompt navigation"></nav>
  </div>
</header>

<main>
  <!-- ───── Top-level statistics ───── -->
  <div class="stats">
    <div class="stat">
      <div class="stat-number" id="totalPrompts">0</div>
      <div class="stat-label">Prompts</div>
    </div>
    <div class="stat">
      <div class="stat-number" id="totalMedia">0</div>
      <div class="stat-label">Media</div>
    </div>
    <div class="stat">
      <div class="stat-number" id="totalModels">0</div>
      <div class="stat-label">Models</div>
    </div>
  </div>

  <!-- ───── Per-model score chart ───── -->
  <div class="chart-wrapper">
    <label for="scoreCategorySelect" style="display:block;margin-bottom:.25rem;font-size:.85rem;color:var(--fg-muted)">Score Category</label>
    <select id="scoreCategorySelect">
      <option value="avg">Overall</option>
      <option value="instruction">Instruction</option>
      <option value="consistency">Consistency</option>
      <option value="realism">Realism</option>
      <option value="animation">Animation</option>
      <option value="creativity">Creativity</option>
    </select>
    <div class="chart-container">
      <canvas id="modelScoreChart" height="120"></canvas>
    </div>
  </div>

  <div id="content"></div>

  <div class="no-results" id="noResults">
    <div style="font-size:3rem;margin-bottom:1rem">🔍</div>
    <div>No prompts match your search</div>
    <div style="font-size:.9rem;margin-top:.5rem;color:var(--fg-muted)">
      Try adjusting your search terms
    </div>
  </div>
</main>

<!-- ───── Modal ───── -->
<div id="mediaModal" class="modal" role="dialog" aria-hidden="true">
  <div class="modal-content">
    <span class="close" aria-label="Close modal">×</span>
    <img id="modalImage" alt="" style="display:none"/>
    <video id="modalVideo" controls playsinline style="display:none"></video>
    <div class="modal-caption" id="modalCaption"></div>
  </div>
</div>

<!-- ----------- DATA + APP ----------- -->
<script>
/*───────────────────────────────────────────
 1) EDIT YOUR DATA BELOW
───────────────────────────────────────────*/
const examples = [
  {
    prompt:"Realistic woman in mid 40s walking through a city street in New York",
    images:[
      {model:"Reference Image",src:"examples/woman_40_walking_nyc/original.jpeg"},
      {model:"Veo 3 – v1",src:"examples/woman_40_walking_nyc/veo3_1.mp4"},
      {model:"Veo 3 – v2",src:"examples/woman_40_walking_nyc/veo3_2.mp4"},
      {model:"Veo 2",src:"examples/woman_40_walking_nyc/veo2.mp4"},
      {model:"HunYuan",src:"examples/woman_40_walking_nyc/hunyuan.mp4"},
      {model:"Wan 2.1",src:"examples/woman_40_walking_nyc/wan21.mp4"},
      {model:"Kling 1.6",src:"examples/woman_40_walking_nyc/kling16.mp4"},
      {model:"Kling 2.0",src:"examples/woman_40_walking_nyc/kling20.mp4"},
      {model:"FramePack + HunYuan",src:"examples/woman_40_walking_nyc/framepack_hunyuan.mp4"}
    ],
  },
  {
    prompt:"A nature scene with a blue hummingbird moving towards a flower then flying away",
    images:[
      {model:"Reference Image",src:"examples/humming_bird_flying/original.jpeg"},
      {model:"Veo 3 – v1",src:"examples/humming_bird_flying/veo3_1.mp4"},
      {model:"Veo 3 – v2",src:"examples/humming_bird_flying/veo3_2.mp4"},
      {model:"Veo 2",src:"examples/humming_bird_flying/veo2.mp4"},
      {model:"HunYuan",src:"examples/humming_bird_flying/hunyuan.mp4"},
      {model:"Wan 2.1",src:"examples/humming_bird_flying/wan21.mp4"},
      {model:"Kling 1.6",src:"examples/humming_bird_flying/kling16.mp4"},
      {model:"Kling 2.0",src:"examples/humming_bird_flying/kling20.mp4"},
      {model:"FramePack + HunYuan",src:"examples/humming_bird_flying/framepack_hunyuan.mp4"}
    ],
  },
  {
    prompt:"A first person view of a home chef chopping onions",
    images:[
      {model:"Reference Image",src:"examples/onions/original.jpeg"},
      {model:"Veo 3 – v1",src:"examples/onions/veo3_1.mp4"},
      {model:"Veo 3 – v2",src:"examples/onions/veo3_2.mp4"},
      {model:"Veo 2",src:"examples/onions/veo2.mp4"},
      {model:"HunYuan",src:"examples/onions/hunyuan.mp4"},
      {model:"Wan 2.1",src:"examples/onions/wan21.mp4"},
      {model:"Kling 1.6",src:"examples/onions/kling16.mp4"},
      {model:"Kling 2.0",src:"examples/onions/kling20.mp4"},
      {model:"FramePack + HunYuan",src:"examples/onions/framepack_hunyuan.mp4"}
    ],
  },
  {
    prompt:"Anime red-haired girl dodging an arrow – the arrow narrowly misses her, flying left→right",
    images:[
      {model:"Reference Image",src:"examples/anime/original.jpeg"},
      {model:"Veo 3 – v1",src:"examples/anime/veo3_1.mp4"},
      {model:"Veo 3 – v2",src:"examples/anime/veo3_2.mp4"}
    ],
  },
];

/*───────────────────────────────────────────
 1a) OPTIONAL: MODEL SCORE DATA
      Fill in (out of 10) to have values appear, otherwise "—" will be shown
───────────────────────────────────────────*/
const MODEL_SCORE_DATA = {
  "Veo 3 – v1":       {instruction:9, consistency:8, realism:9, animation:8, creativity:8},
  "Veo 3 – v2":       {instruction:9, consistency:8, realism:8, animation:8, creativity:8},
  "Veo 2":            {instruction:8, consistency:7, realism:8, animation:7, creativity:7},
  "HunYuan":          {instruction:7, consistency:7, realism:7, animation:6, creativity:7},
  "Wan 2.1":          {instruction:6, consistency:6, realism:6, animation:5, creativity:6},
  "Kling 1.6":        {instruction:6, consistency:5, realism:6, animation:5, creativity:6},
  "Kling 2.0":        {instruction:7, consistency:6, realism:7, animation:6, creativity:7},
  "FramePack + HunYuan": {instruction:7, consistency:7, realism:7, animation:7, creativity:8}
};

/*───────────────────────────────────────────
 2)  APPLICATION CODE
───────────────────────────────────────────*/
class MediaShowdown{
  constructor(){
    this.examples=examples;
    this.filtered=[...examples];
    this.modal=document.getElementById('mediaModal');
    this.modalImg=document.getElementById('modalImage');
    this.modalVid=document.getElementById('modalVideo');
    this.modalCap=document.getElementById('modalCaption');
    this.init();
  }

  /* ── Init ── */
  init(){
    this.listeners();
    this.updateStats();
    this.buildNav();
    this.buildScoreTable();   //  <─ NEW
    this.buildContent();
  }

  listeners(){
    /* search */
    document.getElementById('searchInput')
      .addEventListener('input',(e)=>this.handleSearch(e.target.value));

    /* modal close */
    document.querySelector('.close')
      .addEventListener('click',()=>this.closeModal());
    this.modal.addEventListener('click',(e)=>{
      if(e.target===this.modal) this.closeModal();
    });
    document.addEventListener('keydown',(e)=>{
      if(e.key==='Escape') this.closeModal();
    });

    /* global error handling for thumbnails */
    document.addEventListener('error',(e)=>{
      if(e.target.tagName==='IMG'||e.target.tagName==='VIDEO'){
        this.handleError(e.target);
      }
    },true);
  }

  slugify(txt){return txt.toLowerCase()
        .replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');}

  /* ── Statistics ── */
  updateStats(){
    const totalPrompts=this.examples.length;
    const totalMedia=this.examples.reduce((s,ex)=>s+ex.images.length,0);
    const models=new Set();
    this.examples.forEach(ex=>ex.images.forEach(img=>models.add(img.model)));

    document.getElementById('totalPrompts').textContent=totalPrompts;
    document.getElementById('totalMedia').textContent=totalMedia;
    document.getElementById('totalModels').textContent=models.size;
  }

  /* ── Per-model score table ── */
  buildScoreTable(){
    const container=document.getElementById('modelScores');
    container.innerHTML='';

    // Collect unique models excluding reference images
    const modelSet=new Set();
    this.examples.forEach(ex=>ex.images.forEach(img=>{
      if(!/reference/i.test(img.model)) modelSet.add(img.model);
    }));

    const categories=["Instruction","Consistency","Realism","Animation","Creativity"];

    const table=document.createElement('table');
    table.className='model-score-table';

    // Header
    const thead=document.createElement('thead');
    const hrow=document.createElement('tr');
    hrow.innerHTML='<th>Model</th>'+
      categories.map(c=>`<th>${c}</th>`).join('')+
      '<th>Avg.</th>';
    thead.appendChild(hrow);table.appendChild(thead);

    // Body
    const tbody=document.createElement('tbody');
    modelSet.forEach(model=>{
      const data=MODEL_SCORE_DATA[model]||{};
      const row=document.createElement('tr');
      let sum=0,count=0;
      row.innerHTML=`<td style="text-align:left">${model}</td>`+
        categories.map(cat=>{
          const key=cat.toLowerCase().replace(/\s+/g,'');
          const val=data[key];
          if(typeof val==='number') {sum+=val;count++;}
          return `<td>${typeof val==='number'?val:'—'}</td>`;
        }).join('');
      const avg=count? (sum/count).toFixed(1):'—';
      row.innerHTML+=`<td class="avg-cell">${avg}</td>`;
      tbody.appendChild(row);
    });
    table.appendChild(tbody);
    container.appendChild(table);
  }

  /* ── Search ── */
  handleSearch(query){
    const term=query.toLowerCase().trim();
    this.filtered=term?this.examples.filter(ex=>
      ex.prompt.toLowerCase().includes(term) ||
      ex.images.some(m=>m.model.toLowerCase().includes(term))
    ):[...this.examples];

    this.updateNav();this.updateContent();this.toggleNoResults();
  }

  updateNav(){
    document.querySelectorAll('nav a').forEach(link=>{
      const id=link.getAttribute('href').slice(1);
      const visible=this.filtered.some(ex=>this.slugify(ex.prompt)===id);
      link.classList.toggle('hidden',!visible);
    });
  }
  updateContent(){
    document.querySelectorAll('section').forEach(sec=>{
      const visible=this.filtered.some(ex=>this.slugify(ex.prompt)===sec.id);
      sec.classList.toggle('hidden',!visible);
    });
  }
  toggleNoResults(){
    document.getElementById('noResults')
      .classList.toggle('visible',this.filtered.length===0);
  }

  /* ── Navigation build ── */
  buildNav(){
    const nav=document.getElementById('nav');
    this.examples.forEach(ex=>{
      const a=document.createElement('a');
      a.href='#'+this.slugify(ex.prompt);
      a.textContent=ex.prompt.length>50?ex.prompt.slice(0,47)+'…':ex.prompt;
      a.setAttribute('aria-label',`Jump to: ${ex.prompt}`);
      nav.appendChild(a);
    });
  }

  /* ── Content build ── */
  buildContent(){
    const content=document.getElementById('content');
    this.examples.forEach((ex,i)=>{
      const sec=document.createElement('section');
      sec.id=this.slugify(ex.prompt);
      sec.style.animationDelay=`${i*0.1}s`;

      const h=document.createElement('h2');h.textContent=ex.prompt;sec.appendChild(h);
      const grid=document.createElement('div');grid.className='grid';

      ex.images.forEach((img,idx)=>{
        const fig=document.createElement('figure');

        /* detect reference image */
        const isRef=/reference/i.test(img.model)||idx===0;
        if(isRef) fig.classList.add('reference');

        fig.tabIndex=0;fig.role='button';
        fig.setAttribute('aria-label',`View ${img.model} media for: ${ex.prompt}`);

        const container=document.createElement('div');container.className='image-container';

        /* placeholder */
        const load=document.createElement('div');load.className='loading-placeholder';
        load.innerHTML='<div class="loading-spinner"></div>Loading…';
        container.appendChild(load);

        /* decide media type */
        const isVideo=/\.(mp4|webm|mov)$/i.test(img.src);
        let mediaEl;

        if(isVideo){
          mediaEl=document.createElement('video');
          mediaEl.src=img.src;mediaEl.muted=true;mediaEl.playsInline=true;
          mediaEl.loop=true;mediaEl.autoplay=true;mediaEl.style.display='none';
          mediaEl.addEventListener('loadeddata',()=>{load.remove();mediaEl.style.display='block';});
        }else{
          mediaEl=document.createElement('img');
          mediaEl.src=img.src;mediaEl.alt=`${img.model} – ${ex.prompt}`;
          mediaEl.style.display='none';
          mediaEl.onload=()=>{load.remove();mediaEl.style.display='block';};
        }

        container.appendChild(mediaEl);fig.appendChild(container);

        const cap=document.createElement('figcaption');cap.textContent=img.model;
        fig.appendChild(cap);

        /* open modal */
        fig.addEventListener('click',()=>this.openModal(img.src,isVideo,`${img.model} – ${ex.prompt}`));
        fig.addEventListener('keydown',e=>{
          if(e.key==='Enter'||e.key===' '){e.preventDefault();
            this.openModal(img.src,isVideo,`${img.model} – ${ex.prompt}`);}
        });

        grid.appendChild(fig);
      });

      sec.appendChild(grid);content.appendChild(sec);
    });
  }

  /* ── Error placeholder ── */
  handleError(el){
    const cont=el.closest('.image-container');
    const load=cont.querySelector('.loading-placeholder');
    if(load){
      load.textContent='❌ Failed to load';
      load.classList.add('error-placeholder');
    }
    el.style.display='none';
  }

  /* ── Modal ── */
  openModal(src,isVideo,caption){
    /* reset */
    this.modalImg.style.display=this.modalVid.style.display='none';
    this.modalImg.removeAttribute('src');this.modalVid.removeAttribute('src');

    if(isVideo){
      this.modalVid.src=src;this.modalVid.style.display='block';
      this.modalVid.play().catch(()=>{});
    }else{
      this.modalImg.src=src;this.modalImg.alt=caption;
      this.modalImg.style.display='block';
    }
    this.modalCap.textContent=caption;
    this.modal.classList.add('active');this.modal.setAttribute('aria-hidden','false');
    this.modal.focus();
  }
  closeModal(){
    this.modal.classList.remove('active');this.modal.setAttribute('aria-hidden','true');
    this.modalVid.pause();
  }
}

/* ── Init ── */
document.addEventListener('DOMContentLoaded',()=>new MediaShowdown());
</script>
</body>
</html>
